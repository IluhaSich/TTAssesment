<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--<head></head>-->
<body class="d-flex flex-column h-100">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <h1>Итоговые баллы групп</h1>
<table>
    <thead>
    <tr>
        <th>
            <a th:href="@{/grades/total(sortBy='groupName', sortOrder=${sortOrder == 'asc' ? 'desc' : 'asc'})}">
                Группа
                <span th:if="${sortBy == 'groupName'}" th:text="${sortOrder == 'asc' ? '↑' : '↓'}"></span>
            </a>
        </th>
        <th>
            <a th:href="@{/grades/total(sortBy='score', sortOrder=${sortOrder == 'asc' ? 'desc' : 'asc'})}">
                Итоговый балл
                <span th:if="${sortBy == 'score'}" th:text="${sortOrder == 'asc' ? '↑' : '↓'}"></span>
            </a>
        </th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="score : ${totalScores}">
        <td>
            <a th:href="@{/grades/{link}(link=${score.link})}"
               th:text="${score.groupName}">
            </a>
        </td>
        <td th:text="${score.totalScore}"></td>
    </tr>
    </tbody>
</table>
<div class="d-flex justify-content-around bd-highlight">
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li th:class="${currentPage == 0} ? 'page-item disabled' : 'page-item'">
                <a class="page-link" th:href="@{/grades/total(sortBy=${sortBy},
               sortOrder=${sortOrder},
               page=${currentPage - 1})}" aria-label="Previous">
                    <span aria-hidden="true">«</span>
                </a>
            </li>
            <li th:class="${page == currentPage + 1} ? 'page-item active' : 'page-item'"
                th:each="page : ${#numbers.sequence(currentPage < 5 ? 1 : pageCount - currentPage < 3 ? (pageCount >= 5 ? pageCount - 5 : 1) : currentPage - 2, pageCount - currentPage < 3 ? pageCount : currentPage < 5 ? (pageCount >= 5 ? 5 : pageCount) : currentPage + 3)}">
                <!--                            th:each="page : ${#numbers.sequence(currentPage < 5 ? 1 : pageCount - currentPage < 6 ? (pageCount >= 11 ? pageCount - 10 : 1) : currentPage - 4, pageCount - currentPage < 6 ? pageCount : currentPage < 5 ? (pageCount >= 11 ? 11 : pageCount) : currentPage + 6)}">-->
                <a class="page-link" th:href="@{/grades/total(sortBy=${sortBy},
               sortOrder=${sortOrder},
               page=${page - 1})}" th:text="${page}">1</a>
            </li>
            <li th:class="${currentPage == pageCount - 1} ? 'page-item disabled' : 'page-item'">
                <a class="page-link" th:href="@{/grades/total(sortBy=${sortBy},
               sortOrder=${sortOrder},
               page=${currentPage + 1})}" aria-label="Next">
                    <span aria-hidden="true">»</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<!--<div class="d-flex justify-content-around bd-highlight">-->
<!--    <nav aria-label="Page navigation">-->
<!--        <ul class="pagination">-->
<!--            &lt;!&ndash; Ссылка "Назад" &ndash;&gt;-->
<!--            <li th:class="${currentPage == 0} ? 'page-item disabled' : 'page-item'">-->
<!--                <a class="page-link"-->
<!--                   th:href="@{/grades/total(sortBy=${sortBy}, sortOrder=${sortOrder}, page=${currentPage - 1})}"-->
<!--                   aria-label="Previous">-->
<!--                    <span aria-hidden="true">«</span>-->
<!--                </a>-->
<!--            </li>-->

<!--            &lt;!&ndash; Номера страниц &ndash;&gt;-->
<!--            <li th:class="${page == currentPage + 1} ? 'page-item active' : 'page-item'"-->
<!--                th:each="page : ${#numbers.sequence(currentPage < 5 ? 1 : totalPages - currentPage < 3 ? (totalPages >= 5 ? totalPages - 5 : 1) : currentPage - 2, totalPages - currentPage < 3 ? totalPages : currentPage < 5 ? (totalPages >= 5 ? 5 : totalPages) : currentPage + 3)}">-->
<!--                <a class="page-link"-->
<!--                   th:href="@{/grades/total(sortBy=${sortBy}, sortOrder=${sortOrder}, page=${page - 1})"-->
<!--                   th:text="${page}">1</a>-->
<!--            </li>-->

<!--            &lt;!&ndash; Ссылка "Вперед" &ndash;&gt;-->
<!--            <li th:class="${currentPage == totalPages - 1} ? 'page-item disabled' : 'page-item'">-->
<!--                <a class="page-link"-->
<!--                   th:href="@{/grades/total(sortBy=${sortBy}, sortOrder=${sortOrder}, page=${currentPage + 1})}"-->
<!--                   aria-label="Next">-->
<!--                    <span aria-hidden="true">»</span>-->
<!--                </a>-->
<!--            </li>-->
<!--        </ul>-->
<!--    </nav>-->
<!--</div>-->
</body>
</html>